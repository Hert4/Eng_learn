Tuyệt vời, bạn có thể gửi audioBlob từ frontend React của bạn (hiện đang dùng Express backend) sang một Flask backend riêng biệt chỉ bằng một HTTP POST request.

⸻

1. Gửi từ React sang Flask

Sau khi bạn đã có audioBlob, bạn gửi nó như sau:

React:

const sendAudioToFlask = () => {
    if (!audioBlob) return;

    const formData = new FormData();
    formData.append("file", audioBlob, "recording.webm");

    fetch("http://localhost:5000/upload-audio", {
        method: "POST",
        body: formData,
    })
    .then(res => res.json())
    .then(data => console.log("Flask response:", data))
    .catch(err => console.error("Error sending audio to Flask:", err));
};

Lưu ý:
	•	URL http://localhost:5000/upload-audio là Flask server — thay bằng IP/domain thực nếu deploy.
	•	Đừng quên xử lý CORS nếu Flask và React không cùng origin.

⸻

2. Flask backend: Nhận và xử lý file

Cài đặt Flask và CORS nếu chưa:

pip install Flask flask-cors

Flask app:

from flask import Flask, request, jsonify
from flask_cors import CORS
import os

app = Flask(__name__)
CORS(app)  # Cho phép React gửi từ domain khác

UPLOAD_FOLDER = "uploads"
os.makedirs(UPLOAD_FOLDER, exist_ok=True)

@app.route("/upload-audio", methods=["POST"])
def upload_audio():
    if "file" not in request.files:
        return jsonify({"error": "No file uploaded"}), 400

    audio = request.files["file"]
    filename = audio.filename
    save_path = os.path.join(UPLOAD_FOLDER, filename)
    audio.save(save_path)

    print(f"Saved audio to: {save_path}")
    return jsonify({"message": "Audio received", "path": save_path}), 200

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)



⸻

3. Xử lý CORS đúng cách (nếu lỗi)

Bạn có thể cấu hình CORS chi tiết hơn:

CORS(app, resources={r"/upload-audio": {"origins": "*"}})

Hoặc giới hạn theo domain:

CORS(app, resources={r"/upload-audio": {"origins": "http://localhost:3000"}})



⸻

Tổng kết:
	•	React gửi audioBlob qua fetch với FormData.
	•	Flask nhận file tại /upload-audio và lưu vào server.
	•	Đừng quên mở CORS trong Flask nếu khác domain.

Nếu bạn cần code cụ thể cho Express nhận lại response từ Flask hoặc chain tiếp thì mình có thể hỗ trợ thêm. Bạn muốn xử lý gì sau khi Flask nhận file (ví dụ: transcribe, lưu DB, etc)?
